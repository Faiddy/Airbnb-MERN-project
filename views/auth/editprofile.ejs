<%- include('../partials/head') %>
</head>
<body>
  <%- include('../partials/nav') %>

  <div class="container" style="max-width: 500px; margin: 40px auto; background: #fff; padding: 32px; border-radius: 12px; box-shadow: 0 2px 16px rgba(0,0,0,0.08);">
    <h2 style="text-align:center; margin-bottom: 24px;">Edit Profile</h2>

    <!-- âœ… Error message section -->
    <% if (errors && errors.length > 0) { %>
      <div style="color: red; margin-bottom: 16px;">
        <% errors.forEach(error => { %>
          <p><%= error.msg %></p>
        <% }) %>
      </div>
    <% } %>

    <form action="/editprofile" method="POST">
      <!-- First Name -->
      <div class="form-group" style="margin-bottom: 18px;">
        <label for="firstName" style="font-weight: 500;">First Name</label>
        <input type="text" id="firstName" name="firstName" class="form-control" required
               value="<%= oldInput?.firstName || user.firstName %>"
               style="width:100%; padding:10px; border-radius:6px; border:1px solid #ccc;">
      </div>

      <!-- Last Name -->
      <div class="form-group" style="margin-bottom: 18px;">
        <label for="lastName" style="font-weight: 500;">Last Name</label>
        <input type="text" id="lastName" name="lastName" class="form-control" required
               value="<%= oldInput?.lastName || user.lastName %>"
               style="width:100%; padding:10px; border-radius:6px; border:1px solid #ccc;">
      </div>

      <!-- User Type -->
      <div class="form-group" style="margin-bottom: 18px;">
        <label style="font-weight: 500;">User Type</label><br>
        <label style="margin-right: 16px;">
          <input type="radio" name="userType" value="guest"
            <%= (oldInput?.userType || user.userType) === 'guest' ? 'checked' : '' %> />
          Guest
        </label>
        <label>
          <input type="radio" name="userType" value="host"
            <%= (oldInput?.userType || user.userType) === 'host' ? 'checked' : '' %> />
          Host
        </label>
      </div>

      <!-- Email (read-only) -->
      <div class="form-group" style="margin-bottom: 18px;">
        <label for="email" style="font-weight: 500;">Email</label>
        <input type="email" id="email" name="email" class="form-control" readonly
               value="<%= user.email %>"
               style="width:100%; padding:10px; border-radius:6px; border:1px solid #ccc; background:#f5f5f5;">
      </div>

      <!-- Terms Checkbox -->
      <div class="form-group" style="margin-bottom: 24px;">
        <label style="display: flex; align-items: center;">
          <input type="checkbox" name="terms" required style="margin-right: 8px;">
          I agree to the
          <a href="/terms" target="_blank" style="color: #FF5A5F; text-decoration: underline; margin-left: 4px;">Terms and Conditions</a>
        </label>
      </div>

      <!-- Submit Button -->
      <button type="submit" style="width:100%; background:#FF5A5F; color:#fff; border:none; padding:12px; border-radius:6px; font-size:16px; font-weight:600; cursor:pointer;">
        Save Changes
      </button>
    </form>
  </div>
</body>
</html>
